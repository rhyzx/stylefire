!function(r,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e(r.stylefire={})}(this,function(r){"use strict";var e=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++)for(var o in e=arguments[t])Object.prototype.hasOwnProperty.call(e,o)&&(r[o]=e[o]);return r},t=0,n="undefined"!=typeof window&&void 0!==window.requestAnimationFrame?function(r){return window.requestAnimationFrame(r)}:function(r){var e=Date.now(),n=Math.max(0,16.7-(e-t));t=e+n,setTimeout(function(){return r(t)},n)};function o(r){var e=[],t=[],n=0,o=!1,a=0;return{cancel:function(r){var e=t.indexOf(r);-1!==e&&t.splice(e,1)},process:function(){for(o=!0,e=(r=[t,e])[0],(t=r[1]).length=0,n=e.length,a=0;a<n;a++)e[a]();var r;o=!1},schedule:function(a,i){void 0===i&&(i=!1),r();var s=i&&o,u=s?e:t;-1===u.indexOf(a)&&(u.push(a),s&&(n=e.length))}}}"undefined"!=typeof performance&&performance.now;var a=!1;function i(){a||(a=!0,n(l))}var s=o(i),u=o(i),f=o(i),c=o(i);function l(r){a=!1,s.process(),u.process(),f.process(),c.process()}var d,p=f.schedule,h=function(r){var e=r.onRead,t=r.onRender,n=r.aliasMap,o=void 0===n?{}:n,a=r.useCache,i=void 0===a||a;return function(r){var n={},a=[],s=!1,u=function(r,e){var t=o[r]||r,i=n[t];n[t]=e,n[t]!==i&&(-1===a.indexOf(t)&&a.push(t),s||(s=!0,p(f)))};function f(e){return void 0===e&&(e=!1),(e||s)&&(t(n,r,a),s=!1,a.length=0),this}return{get:function(t){var a=o[t]||t;return a?i&&void 0!==n[a]?n[a]:e(a,r):n},set:function(r,e){if("string"==typeof r){if(void 0===e)return function(e){return u(r,e)};u(r,e)}else for(var t in r)r.hasOwnProperty(t)&&u(t,r[t]);return this},render:f}}},v=/([a-z])([A-Z])/g,g=function(r){return r.replace(v,"$1-$2").toLowerCase()},m=new Map,w=new Map,y=["Webkit","Moz","O","ms",""],O=y.length,b=function(r){if("undefined"!=typeof document){d=d||document.createElement("div");for(var e=0;e<O;e++){var t=y[e],n=""===t,o=n?r:t+r.charAt(0).toUpperCase()+r.slice(1);o in d.style&&(m.set(r,o),w.set(r,(n?"":"-")+g(o)))}}};function x(r,e){void 0===e&&(e=!1);var t=e?w:m;return t.has(r)||b(r),t.get(r)||r}var Y=["","X","Y","Z"],k=["translate","scale","rotate","skew","transformPerspective"].reduce(function(r,e){return Y.reduce(function(r,t){return r.push(e+t),r},r)},["x","y","z"]),X=k.reduce(function(r,e){return r[e]=!0,r},{}),L=function(r){return!0===X[r]},M=function(r,e){return k.indexOf(r)-k.indexOf(e)},C=function(r){return"transformOriginX"===r||"transformOriginY"===r},T=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++)for(var o in e=arguments[t])Object.prototype.hasOwnProperty.call(e,o)&&(r[o]=e[o]);return r},P=function(r,e){return function(t){return Math.max(Math.min(t,e),r)}},Z=function(r){return{test:(e=r,function(r){return"string"==typeof r&&-1!==r.indexOf(e)}),parse:parseFloat,transform:function(e){return""+e+r}};var e},R=function(r){return function(e){return"string"==typeof e&&0===e.indexOf(r)}},S=function(r){return r.substring(r.indexOf("(")+1,r.lastIndexOf(")"))},j=function(r){return"string"==typeof r?r.split(/,\s*/):[r]};function A(r){var e=r.length;return function(t){for(var n={},o=j(S(t)),a=0;a<e;a++)n[r[a]]=void 0!==o[a]?parseFloat(o[a]):1;return n}}var E={test:function(r){return"number"==typeof r},parse:parseFloat,transform:function(r){return r}},F=T({},E,{transform:P(0,1)}),H=Z("deg"),N=Z("%"),V=Z("px"),z=T({},E,{default:1}),I=P(0,255),q=T({},E,{transform:function(r){return Math.round(I(r))}}),B={test:R("rgb"),parse:A(["red","green","blue","alpha"]),transform:function(r){var e=r.red,t=r.green,n=r.blue,o=r.alpha;return function(r){var e=r.red,t=r.green,n=r.blue,o=r.alpha;return"rgba("+e+", "+t+", "+n+", "+(void 0===o?1:o)+")"}({red:q.transform(e),green:q.transform(t),blue:q.transform(n),alpha:o})}},W={test:R("hsl"),parse:A(["hue","saturation","lightness","alpha"]),transform:function(r){var e=r.hue,t=r.saturation,n=r.lightness,o=r.alpha;return function(r){var e=r.hue,t=r.saturation,n=r.lightness,o=r.alpha;return"hsla("+e+", "+t+", "+n+", "+(void 0===o?1:o)+")"}({hue:Math.round(e),saturation:N.transform(t),lightness:N.transform(n),alpha:o})}},_=T({},B,{test:R("#"),parse:function(r){var e,t,n;return r.length>4?(e=r.substr(1,2),t=r.substr(3,2),n=r.substr(5,2)):(e=r.substr(1,1),t=r.substr(2,1),n=r.substr(3,1),e+=e,t+=t,n+=n),{red:parseInt(e,16),green:parseInt(t,16),blue:parseInt(n,16),alpha:1}}}),D={test:function(r){return B.test(r)||W.test(r)||_.test(r)},parse:function(r){return B.test(r)?B.parse(r):W.test(r)?W.parse(r):_.test(r)?_.parse(r):r},transform:function(r){return function(r){return void 0!==r.red}(r)?B.transform(r):function(r){return void 0!==r.hue}(r)?W.transform(r):r}},G={color:D,backgroundColor:D,outlineColor:D,fill:D,stroke:D,borderColor:D,borderTopColor:D,borderRightColor:D,borderBottomColor:D,borderLeftColor:D,borderRadius:V,width:V,maxWidth:V,height:V,maxHeight:V,top:V,left:V,bottom:V,right:V,rotate:H,rotateX:H,rotateY:H,rotateZ:H,scale:z,scaleX:z,scaleY:z,scaleZ:z,skewX:H,skewY:H,distance:V,translateX:V,translateY:V,translateZ:V,perspective:V,opacity:F,transformOriginX:N,transformOriginY:N,transformOriginZ:V};function U(r){return G[r]}var $="number",J="object",K="transform-origin",Q="transform",rr="translateZ",er=";transform: none",tr=function(r,e){return";"+r+":"+e};function nr(r,e,t,n){void 0===e&&(e=!0),void 0===t&&(t=!0);for(var o=!0===e?Object.keys(r):e,a="",i="",s=!1,u=!0,f=!1,c=!1,l=o.length,d=0;d<l;d++){var p=o[d];if(L(p)){for(var h in f=!0,r)L(h)&&-1===o.indexOf(h)&&o.push(h);break}}o.sort(M);var v=o.length;for(d=0;d<v;d++){p=o[d];if(!n.has(p)){var g=L(p),m=r[p],w=U(p);g&&(w.default&&m!==w.default||!w.default&&0!==m)&&(u=!1),w&&(typeof m===$||typeof m===J)&&w.transform&&(m=w.transform(m)),g?(i+=p+"("+m+") ",c=p===rr||c):C(p)?(r[p]=m,s=!0):a+=tr(x(p,!0),m)}}return s&&(a+=tr(K,(r.transformOriginX||0)+" "+(r.transformOriginY||0)+" "+(r.transformOriginZ||0))),f&&(!c&&t&&(i+=rr+"(0)"),a+=tr(Q,u?er:i)),a}var or=new Set(["scrollLeft","scrollTop"]),ar=h({onRead:function(r,e){var t=e.element,n=e.preparseOutput,o=U(r);if(L(r))return o&&o.default||0;if(or.has(r))return t[r];var a=window.getComputedStyle(t,null).getPropertyValue(x(r,!0))||0;return n&&o&&o.parse?o.parse(a):a},onRender:function(r,e,t){var n=e.element,o=e.enableHardwareAcceleration;n.style.cssText+=nr(r,t,o,or),-1!==t.indexOf("scrollLeft")&&(n.scrollLeft=r.scrollLeft),-1!==t.indexOf("scrollTop")&&(n.scrollTop=r.scrollTop)},aliasMap:{x:"translateX",y:"translateY",z:"translateZ",originX:"transformOriginX",originY:"transformOriginY",originZ:"transformOriginZ"},uncachedValues:or});var ir=function(r,e){return r/100*e+"px"},sr={fill:D,stroke:D,scale:z,scaleX:z,scaleY:z,opacity:F,fillOpacity:F,strokeOpacity:F};var ur=h({onRead:function(r,e){var t=e.element;if(L(r)){var n=function(r){return sr[r]}(r);return n?n.default:0}return t.getAttribute(r)},onRender:function(r,e,t){var n=e.dimensions;!function(r,e){for(var t in e)e.hasOwnProperty(t)&&r.setAttribute(t,e[t])}(e.element,function(r,e,t,n){var o=!1,a=!1,i={},s=t?{pathLength:"0",pathSpacing:""+n}:void 0,u=void 0!==r.scale?r.scale||1e-7:r.scaleX||1,f=void 0!==r.scaleY?r.scaleY||1e-7:u||1,c=e.width*((r.originX||50)/100)+e.x,l=e.height*((r.originY||50)/100)+e.y,d=1*u*-c,p=1*f*-l,h=c/u,v=l/f,m={translate:"translate("+r.translateX+", "+r.translateY+") ",scale:"translate("+d+", "+p+") scale("+u+", "+f+") translate("+h+", "+v+") ",rotate:"rotate("+r.rotate+", "+c+", "+l+") ",skewX:"skewX("+r.skewX+") ",skewY:"skewY("+r.skewY+") "};for(var w in r)if(r.hasOwnProperty(w)){var y=r[w];L(w)?o=!0:!t||"pathLength"!==w&&"pathSpacing"!==w||"number"!=typeof y?t&&"pathOffset"===w?i["stroke-dashoffset"]=ir(-y,n):i[g(w)]=y:(a=!0,s[w]=ir(y,n))}if(a&&(i["stroke-dasharray"]=s.pathLength+" "+s.pathSpacing),o)for(var w in i.transform="",m)if(m.hasOwnProperty(w)){var O="scale"===w?"1":"0";i.transform+=m[w].replace(/undefined/g,O)}return i}(r,n,e.isPath,e.pathLength))},aliasMap:{x:"translateX",y:"translateY",background:"fill"}});var fr=h({useCache:!1,onRead:function(r){return"scrollTop"===r?window.pageYOffset:window.pageXOffset},onRender:function(r){var e=r.scrollTop,t=void 0===e?0:e,n=r.scrollLeft,o=void 0===n?0:n;return window.scrollTo(o,t)}}),cr=function(){};"production"!==process.env.NODE_ENV&&(cr=function(r,e){if(!r)throw new Error("Hey, listen! ".toUpperCase()+e)});var lr=new WeakMap,dr=function(r,t){var n;return r instanceof HTMLElement?n=function(r,t){return ar(e({element:r,enableHardwareAcceleration:!0,preparseOutput:!0},t))}(r,t):r instanceof SVGElement?n=function(r){var e=r.getBBox(),t={element:r,dimensions:{x:e.x,y:e.y,width:e.width,height:e.height},isPath:!1};return"path"===r.tagName&&(t.isPath=!0,t.pathLength=r.getTotalLength()),ur(t)}(r):"undefined"!=typeof window&&r===window&&(n=fr(r)),cr(void 0!==n,"No valid node provided. Node must be HTMLElement, SVGElement or window."),lr.set(r,n),n},pr=function(r,e){return lr.has(r)?lr.get(r):dr(r,e)};r.default=function(r,e){var t="string"==typeof r?document.querySelector(r):r;return pr(t,e)},r.createStylerFactory=h,r.buildStyles=nr,Object.defineProperty(r,"__esModule",{value:!0})});
