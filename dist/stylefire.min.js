!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(e.stylefire={})}(this,function(e){"use strict";var t=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},r=0,n="undefined"!=typeof window&&void 0!==window.requestAnimationFrame?function(e){return window.requestAnimationFrame(e)}:function(e){var t=Date.now(),n=Math.max(0,16.7-(t-r));r=t+n,setTimeout(function(){return e(r)},n)};function a(e){var t=[],r=[],n=0,a=!1,o=0;return{cancel:function(e){var t=r.indexOf(e);-1!==t&&r.splice(t,1)},process:function(){for(a=!0,t=(e=[r,t])[0],(r=e[1]).length=0,n=t.length,o=0;o<n;o++)t[o]();var e;a=!1},schedule:function(o,s){void 0===s&&(s=!1),e();var i=s&&a,f=i?t:r;-1===f.indexOf(o)&&(f.push(o),i&&(n=t.length))}}}"undefined"!=typeof performance&&performance.now;var o=!1;function s(){o||(o=!0,n(c))}var i=a(s),f=a(s),u=a(s),l=a(s);function c(e){o=!1,i.process(),f.process(),u.process(),l.process()}var d,p=u.schedule,h=function(e){var t=e.onRead,r=e.onRender,n=e.aliasMap,a=void 0===n?{}:n,o=e.useCache,s=void 0===o||o;return function(e){var n={},o=[],i=!1,f=function(e,t){var r=a[e]||e,s=n[r];n[r]=t,n[r]!==s&&(-1===o.indexOf(r)&&o.push(r),i||(i=!0,p(u)))};function u(t){return void 0===t&&(t=!1),(t||i)&&(r(n,e,o),i=!1,o.length=0),this}return{get:function(r){var o=a[r]||r;return o?s&&void 0!==n[o]?n[o]:t(o,e):n},set:function(e,t){if("string"==typeof e){if(void 0===t)return function(t){return f(e,t)};f(e,t)}else for(var r in e)e.hasOwnProperty(r)&&f(r,e[r]);return this},render:u}}},g=/([a-z])([A-Z])/g,m=function(e){return e.replace(g,"$1-$2").toLowerCase()},v=new Map,w=new Map,y=["Webkit","Moz","O","ms",""],O=y.length,b=function(e,t){void 0===t&&(t=!1);var r=t?w:v;return r.has(e)||function(e){if("undefined"!=typeof document){d=d||document.createElement("div");for(var t=0;t<O;t++){var r=y[t],n=""===r,a=n?e:r+e.charAt(0).toUpperCase()+e.slice(1);a in d.style&&(v.set(e,a),w.set(e,(n?"":"-")+m(a)))}}}(e),r.get(e)||e},x=["","X","Y","Z"],Y=["translate","scale","rotate","skew","transformPerspective"].reduce(function(e,t){return x.reduce(function(e,r){return e.push(t+r),e},e)},["x","y","z"]),k=Y.reduce(function(e,t){return e[t]=!0,e},{}),X=function(e){return!0===k[e]},L=function(e,t){return Y.indexOf(e)-Y.indexOf(t)},M=function(e){return"transformOriginX"===e||"transformOriginY"===e};const C=(e,t)=>r=>Math.max(Math.min(r,t),e),T=e=>({test:(e=>t=>"string"==typeof t&&-1!==t.indexOf(e))(e),parse:parseFloat,transform:t=>`${t}${e}`}),$=e=>t=>"string"==typeof t&&0===t.indexOf(e),P=e=>e.substring(e.indexOf("(")+1,e.lastIndexOf(")")),Z=e=>"string"==typeof e?e.split(/,\s*/):[e];function j(e){const t=e.length;return function(r){const n={},a=Z(P(r));for(let r=0;r<t;r++)n[e[r]]=void 0!==a[r]?parseFloat(a[r]):1;return n}}const R={test:e=>"number"==typeof e,parse:parseFloat,transform:e=>e},S=Object.assign({},R,{transform:C(0,1)}),A=T("deg"),E=T("%"),F=T("px"),H=Object.assign({},R,{default:1}),N=C(0,255),V=Object.assign({},R,{transform:e=>Math.round(N(e))}),z={test:$("rgb"),parse:j(["red","green","blue","alpha"]),transform:({red:e,green:t,blue:r,alpha:n})=>(({red:e,green:t,blue:r,alpha:n=1})=>`rgba(${e}, ${t}, ${r}, ${n})`)({red:V.transform(e),green:V.transform(t),blue:V.transform(r),alpha:n})},I={test:$("hsl"),parse:j(["hue","saturation","lightness","alpha"]),transform:({hue:e,saturation:t,lightness:r,alpha:n})=>(({hue:e,saturation:t,lightness:r,alpha:n=1})=>`hsla(${e}, ${t}, ${r}, ${n})`)({hue:Math.round(e),saturation:E.transform(t),lightness:E.transform(r),alpha:n})},q=Object.assign({},z,{test:$("#"),parse:e=>{let t,r,n;return e.length>4?(t=e.substr(1,2),r=e.substr(3,2),n=e.substr(5,2)):(t=e.substr(1,1),r=e.substr(2,1),n=e.substr(3,1),t+=t,r+=r,n+=n),{red:parseInt(t,16),green:parseInt(r,16),blue:parseInt(n,16),alpha:1}}}),B={test:e=>z.test(e)||I.test(e)||q.test(e),parse:e=>z.test(e)?z.parse(e):I.test(e)?I.parse(e):q.test(e)?q.parse(e):e,transform:e=>(e=>void 0!==e.red)(e)?z.transform(e):(e=>void 0!==e.hue)(e)?I.transform(e):e};var W={color:B,backgroundColor:B,outlineColor:B,fill:B,stroke:B,borderColor:B,borderTopColor:B,borderRightColor:B,borderBottomColor:B,borderLeftColor:B,borderRadius:F,width:F,maxWidth:F,height:F,maxHeight:F,top:F,left:F,bottom:F,right:F,rotate:A,rotateX:A,rotateY:A,rotateZ:A,scale:H,scaleX:H,scaleY:H,scaleZ:H,skewX:A,skewY:A,distance:F,translateX:F,translateY:F,translateZ:F,perspective:F,opacity:S,transformOriginX:E,transformOriginY:E,transformOriginZ:F},_=function(e){return W[e]},D="number",G="object",U="transform-origin",J="transform",K="translateZ",Q=";transform: none",ee=function(e,t){return";"+e+":"+t};function te(e,t,r,n){void 0===t&&(t=!0),void 0===r&&(r=!0);for(var a=!0===t?Object.keys(e):t,o="",s="",i=!1,f=!0,u=!1,l=!1,c=a.length,d=0;d<c;d++){var p=a[d];if(X(p)){for(var h in u=!0,e)X(h)&&-1===a.indexOf(h)&&a.push(h);break}}a.sort(L);var g=a.length;for(d=0;d<g;d++){p=a[d];if(!n.has(p)){var m=X(p),v=e[p],w=_(p);m&&(w.default&&v!==w.default||!w.default&&0!==v)&&(f=!1),w&&(typeof v===D||typeof v===G)&&w.transform&&(v=w.transform(v)),m?(s+=p+"("+v+") ",l=p===K||l):M(p)?(e[p]=v,i=!0):o+=ee(b(p,!0),v)}}return i&&(o+=ee(U,(e.transformOriginX||0)+" "+(e.transformOriginY||0)+" "+(e.transformOriginZ||0))),u&&(!l&&r&&(s+=K+"(0)"),o+=ee(J,f?Q:s)),o}var re=new Set(["scrollLeft","scrollTop"]),ne=h({onRead:function(e,t){var r=t.element,n=t.preparseOutput,a=_(e);if(X(e))return a&&a.default||0;if(re.has(e))return r[e];var o=window.getComputedStyle(r,null).getPropertyValue(b(e,!0))||0;return n&&a&&a.parse?a.parse(o):o},onRender:function(e,t,r){var n=t.element,a=t.enableHardwareAcceleration;n.style.cssText+=te(e,r,a,re),-1!==r.indexOf("scrollLeft")&&(n.scrollLeft=e.scrollLeft),-1!==r.indexOf("scrollTop")&&(n.scrollTop=e.scrollTop)},aliasMap:{x:"translateX",y:"translateY",z:"translateZ",originX:"transformOriginX",originY:"transformOriginY",originZ:"transformOriginZ"},uncachedValues:re}),ae=function(e,t){return e/100*t+"px"},oe={fill:B,stroke:B,scale:H,scaleX:H,scaleY:H,opacity:S,fillOpacity:S,strokeOpacity:S},se=h({onRead:function(e,t){var r=t.element;if(X(e)){var n=function(e){return oe[e]}(e);return n?n.default:0}return r.getAttribute(e)},onRender:function(e,t,r){var n=t.dimensions;!function(e,t){for(var r in t)t.hasOwnProperty(r)&&e.setAttribute(r,t[r])}(t.element,function(e,t,r,n){var a=!1,o=!1,s={},i=r?{pathLength:"0",pathSpacing:""+n}:void 0,f=void 0!==e.scale?e.scale||1e-7:e.scaleX||1,u=void 0!==e.scaleY?e.scaleY||1e-7:f||1,l=t.width*((e.originX||50)/100)+t.x,c=t.height*((e.originY||50)/100)+t.y,d=1*f*-l,p=1*u*-c,h=l/f,g=c/u,v={translate:"translate("+e.translateX+", "+e.translateY+") ",scale:"translate("+d+", "+p+") scale("+f+", "+u+") translate("+h+", "+g+") ",rotate:"rotate("+e.rotate+", "+l+", "+c+") ",skewX:"skewX("+e.skewX+") ",skewY:"skewY("+e.skewY+") "};for(var w in e)if(e.hasOwnProperty(w)){var y=e[w];X(w)?a=!0:!r||"pathLength"!==w&&"pathSpacing"!==w||"number"!=typeof y?r&&"pathOffset"===w?s["stroke-dashoffset"]=ae(-y,n):s[m(w)]=y:(o=!0,i[w]=ae(y,n))}if(o&&(s["stroke-dasharray"]=i.pathLength+" "+i.pathSpacing),a)for(var w in s.transform="",v)if(v.hasOwnProperty(w)){var O="scale"===w?"1":"0";s.transform+=v[w].replace(/undefined/g,O)}return s}(e,n,t.isPath,t.pathLength))},aliasMap:{x:"translateX",y:"translateY",background:"fill"}}),ie=h({useCache:!1,onRead:function(e){return"scrollTop"===e?window.pageYOffset:window.pageXOffset},onRender:function(e){var t=e.scrollTop,r=void 0===t?0:t,n=e.scrollLeft,a=void 0===n?0:n;return window.scrollTo(a,r)}}),fe=function(){};"production"!==process.env.NODE_ENV&&(fe=function(e,t){if(!e)throw new Error("Hey, listen! ".toUpperCase()+t)});var ue=new WeakMap,le=function(e,r){var n;return e instanceof HTMLElement?n=function(e,r){return ne(t({element:e,enableHardwareAcceleration:!0,preparseOutput:!0},r))}(e,r):e instanceof SVGElement?n=function(e){var t=e.getBBox(),r={element:e,dimensions:{x:t.x,y:t.y,width:t.width,height:t.height},isPath:!1};return"path"===e.tagName&&(r.isPath=!0,r.pathLength=e.getTotalLength()),se(r)}(e):"undefined"!=typeof window&&e===window&&(n=ie(e)),fe(void 0!==n,"No valid node provided. Node must be HTMLElement, SVGElement or window."),ue.set(e,n),n},ce=function(e,t){return ue.has(e)?ue.get(e):le(e,t)};e.default=function(e,t){var r="string"==typeof e?document.querySelector(e):e;return ce(r,t)},e.createStylerFactory=h,e.buildStyles=te,Object.defineProperty(e,"__esModule",{value:!0})});
